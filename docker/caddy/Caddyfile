{
    email admin@logisteia.com
}

# --- API Backend (para el frontend) ---
api.logisteia.com {
    # Proxy inverso al backend PHP
    reverse_proxy backend:80 {
        # Pasar todos los headers originales
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
    
    # Compresión
    encode gzip
}

# --- Tu web principal (Angular + PHP) ---
logisteia.com, www.logisteia.com {
    root * /srv
    encode gzip
    
    php_fastcgi backend:9000 {
        root /var/www/html
    }
    
    file_server
    try_files {path} {path}/ /index.html
}

# --- phpMyAdmin ---
pma.logisteia.com {
    # Redirige el tráfico al contenedor de phpmyadmin en su puerto interno (80)
    reverse_proxy phpmyadmin:80
}